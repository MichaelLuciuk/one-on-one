<!DOCTYPE html>

<html lang="en">
<head>

	<title> One - One </title>

	<script src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
	<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>

<body>
	
	<div class="container">
		<center>
			<h1>One on Ones</h1>
			<table id="tbl-one-on-one-meetings" class="table">
			  <tr>
			    <th>Person</th>
			    <th>Date</th> 
			    <th>Action</th>
			  </tr>
			  
			</table>
		</center>	
	</div>

	<script>
	$(function() {
		//This executes on page load
		//var Firebase = require("firebase");
		var myFirebaseRef = new Firebase("https://blinding-inferno-7930.firebaseio.com/People");
		
		myFirebaseRef.on("child_added", function(snapshot) {
		  var newPeople = snapshot.val();
		  var meetings = newPeople.meetings;
		  var table = document.getElementById("tbl-one-on-one-meetings");

		  for (var i = 0; i < meetings.length; i++) {
		  	console.log("text: " + meetings[i].text)
		  	console.log("date: " + meetings[i].date)
		  	console.log("Name: " + newPeople.name);
		  	console.log("Email: " + newPeople.email);
		  	var tableRow = ("<th>" + newPeople.name + "</th><th>" + meetings[i].date + "</th><th>" + meetings[i].text + "</th>")
		  	console.log(tableRow);
		  	var newTableRow = document.createElement('tr');
		  	newTableRow.innerHTML = tableRow;
		  	table.appendChild(newTableRow);
		  }


		});
		// var email1 = "test"


		//TODO: Connect to firebase
		//TODO: Log out all of the one-on-ones in the database
	});
	</script>
</body>
</html>